<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø§Ù„ÙƒØ±Ø© ÙÙŠ Ø§Ù„Ø£ØºÙˆØ§Ø· | KOORA LAGHOUAT</title>
    
    <!-- Ø§Ø³ØªØ¯Ø¹Ø§Ø¡ Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Ø§Ø³ØªØ¯Ø¹Ø§Ø¡ Ø®Ø· Cairo -->
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700;900&display=swap" rel="stylesheet">
    
    <!-- Ø§Ø³ØªØ¯Ø¹Ø§Ø¡ Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª FontAwesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Tailwind -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'kl-green': '#006400',
                        'kl-light-green': '#32CD32',
                        'kl-black': '#1a1a1a',
                        'kl-gray': '#f4f4f4',
                    },
                    fontFamily: {
                        sans: ['Cairo', 'sans-serif'],
                    },
                    animation: {
                        'ticker': 'ticker 30s linear infinite', 
                        'fade-in': 'fadeIn 0.5s ease-out forwards',
                    },
                    keyframes: {
                        ticker: {
                            '0%': { transform: 'translateX(-100%)' }, 
                            '100%': { transform: 'translateX(100%)' }, 
                        },
                        fadeIn: {
                            '0%': { opacity: '0', transform: 'translateY(10px)' },
                            '100%': { opacity: '1', transform: 'translateY(0)' },
                        }
                    }
                }
            }
        }
    </script>

    <style>
        body { background-color: #f9f9f9; }
        .section-hidden { display: none; }
        .active-link { color: #32CD32 !important; font-weight: bold; border-bottom: 2px solid #32CD32; }
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #f1f1f1; }
        ::-webkit-scrollbar-thumb { background: #006400; border-radius: 4px; }
        .hover-zoom img { transition: transform 0.5s ease; }
        .hover-zoom:hover img { transform: scale(1.1); }
        
        .modal { transition: opacity 0.3s ease; }
        .modal-hidden { opacity: 0; pointer-events: none; }
        .modal-visible { opacity: 1; pointer-events: auto; }
        
        /* League Selector Styling */
        .league-btn-active { 
            background-color: #006400; 
            color: white; 
            border-color: #006400; 
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }
        .league-btn-inactive { 
            background-color: white; 
            color: #1a1a1a; 
            border-color: #e5e7eb; 
        }
    </style>
</head>
<body class="font-sans text-gray-800">

    <!-- Login Modal -->
    <div id="login-modal" class="fixed inset-0 bg-black/80 z-[100] flex items-center justify-center modal modal-hidden">
        <div class="bg-white rounded-xl p-8 max-w-sm w-full shadow-2xl relative">
            <button onclick="toggleLoginModal()" class="absolute top-4 left-4 text-gray-500 hover:text-red-500"><i class="fas fa-times"></i></button>
            <h2 class="text-2xl font-black text-center mb-6 text-kl-green">Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…Ø´Ø±Ù</h2>
            <form onsubmit="handleLogin(event)" class="space-y-4">
                <div>
                    <label class="block text-sm font-bold mb-1">Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</label>
                    <input type="text" id="username" class="w-full border p-2 rounded focus:outline-none focus:border-kl-green" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…">
                </div>
                <div>
                    <label class="block text-sm font-bold mb-1">ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</label>
                    <input type="password" id="password" class="w-full border p-2 rounded focus:outline-none focus:border-kl-green" placeholder="********">
                </div>
                <button type="submit" class="w-full bg-kl-green text-white font-bold py-2 rounded hover:bg-kl-black transition">Ø¯Ø®ÙˆÙ„</button>
            </form>
        </div>
    </div>

    <!-- Admin Floating Button -->
    <button onclick="toggleLoginModal()" class="fixed bottom-6 left-6 z-50 bg-gray-800 text-white p-4 rounded-full shadow-lg hover:bg-kl-green transition hover:scale-110" title="Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…">
        <i class="fas fa-cogs text-xl"></i>
    </button>

    <!-- Admin Dashboard -->
    <div id="admin-panel" class="section-hidden fixed inset-0 bg-gray-100 z-[90] overflow-y-auto">
        <div class="container mx-auto p-6">
            <div class="flex justify-between items-center mb-8">
                <h1 class="text-3xl font-black text-kl-black">âš™ï¸ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</h1>
                <div class="space-x-4 space-x-reverse">
                    <button onclick="saveChanges()" class="bg-green-600 text-white px-6 py-2 rounded font-bold hover:bg-green-700 shadow-lg"><i class="fas fa-save"></i> Ø­ÙØ¸ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª</button>
                    <button onclick="closeAdminPanel()" class="bg-red-500 text-white px-6 py-2 rounded font-bold hover:bg-red-600 shadow-lg">Ø®Ø±ÙˆØ¬</button>
                </div>
            </div>

            <!-- Admin Tabs -->
            <div class="flex space-x-2 space-x-reverse mb-6 overflow-x-auto">
                <button onclick="switchAdminTab('general')" class="admin-tab-btn bg-white px-4 py-2 rounded shadow font-bold hover:text-kl-green">Ø¹Ø§Ù… & Ø§Ù„Ø´Ø¹Ø§Ø±</button>
                <button onclick="switchAdminTab('ticker')" class="admin-tab-btn bg-white px-4 py-2 rounded shadow font-bold hover:text-kl-green">Ø´Ø±ÙŠØ· Ø§Ù„Ø£Ø®Ø¨Ø§Ø±</button>
                <button onclick="switchAdminTab('slider')" class="admin-tab-btn bg-white px-4 py-2 rounded shadow font-bold hover:text-kl-green">Ø§Ù„Ø³Ù„Ø§ÙŠØ¯Ø±</button>
                <button onclick="switchAdminTab('news')" class="admin-tab-btn bg-white px-4 py-2 rounded shadow font-bold hover:text-kl-green">Ø§Ù„Ø£Ø®Ø¨Ø§Ø±</button>
                <button onclick="switchAdminTab('teams')" class="admin-tab-btn bg-white px-4 py-2 rounded shadow font-bold hover:text-kl-green">Ø§Ù„ØªØ±ØªÙŠØ¨ ÙˆØ§Ù„ÙØ±Ù‚</button>
            </div>

            <!-- Tab Contents -->
            <div id="tab-general" class="admin-tab-content bg-white p-6 rounded shadow-md">
                <h3 class="text-xl font-bold mb-4">Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø¹Ø§Ù…Ø©</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-bold mb-1">Ø§Ø³Ù… Ø§Ù„Ù…ÙˆÙ‚Ø¹ 1</label>
                        <input type="text" id="edit-site-name-1" class="w-full border p-2 rounded">
                    </div>
                    <div>
                        <label class="block text-sm font-bold mb-1">Ø§Ø³Ù… Ø§Ù„Ù…ÙˆÙ‚Ø¹ 2</label>
                        <input type="text" id="edit-site-name-2" class="w-full border p-2 rounded">
                    </div>
                    <div>
                        <label class="block text-sm font-bold mb-1">ÙˆØµÙ Ø§Ù„Ø´Ø¹Ø§Ø± (Ø§Ù„Ù†Øµ)</label>
                        <input type="text" id="edit-site-desc" class="w-full border p-2 rounded">
                    </div>
                     <div>
                        <label class="block text-sm font-bold mb-1 text-kl-green">Ø±Ø§Ø¨Ø· ØµÙˆØ±Ø© Ø´Ø¹Ø§Ø± Ø§Ù„Ù…ÙˆÙ‚Ø¹ (Logo URL)</label>
                        <input type="text" id="edit-site-logo" placeholder="https://..." class="w-full border-2 border-kl-green p-2 rounded bg-green-50">
                        <p class="text-xs text-gray-500 mt-1">Ø§ØªØ±ÙƒÙ‡ ÙØ§Ø±ØºØ§Ù‹ Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ©</p>
                    </div>
                     <div>
                        <label class="block text-sm font-bold mb-1">ØµÙˆØ±Ø© Ø§Ù„Ø®Ù„ÙÙŠØ©</label>
                        <input type="text" id="edit-bg-image" class="w-full border p-2 rounded">
                    </div>
                </div>
            </div>

            <div id="tab-ticker" class="admin-tab-content hidden bg-white p-6 rounded shadow-md">
                <h3 class="text-xl font-bold mb-4">Ø´Ø±ÙŠØ· Ø§Ù„Ø£Ø®Ø¨Ø§Ø± Ø§Ù„Ø¹Ø§Ø¬Ù„Ø©</h3>
                <textarea id="edit-ticker-text" rows="6" class="w-full border p-2 rounded focus:border-kl-green"></textarea>
            </div>

            <div id="tab-slider" class="admin-tab-content hidden bg-white p-6 rounded shadow-md">
                <h3 class="text-xl font-bold mb-4">Ø§Ù„ØµÙˆØ± Ø§Ù„Ù…ØªØ­Ø±ÙƒØ©</h3>
                <div id="slider-editor-container" class="space-y-4"></div>
                <button onclick="addNewSlideInput()" class="mt-4 bg-gray-200 px-4 py-2 rounded hover:bg-gray-300 font-bold">+ Ø¥Ø¶Ø§ÙØ© Ø´Ø±ÙŠØ­Ø©</button>
            </div>

            <div id="tab-news" class="admin-tab-content hidden bg-white p-6 rounded shadow-md">
                <h3 class="text-xl font-bold mb-4">Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø£Ø®Ø¨Ø§Ø±</h3>
                <div id="news-editor-container" class="grid grid-cols-1 md:grid-cols-2 gap-4"></div>
                <button onclick="addNewNewsInput()" class="mt-4 bg-gray-200 px-4 py-2 rounded hover:bg-gray-300 font-bold w-full">+ Ø¥Ø¶Ø§ÙØ© Ø®Ø¨Ø± Ø¬Ø¯ÙŠØ¯</button>
            </div>

            <div id="tab-teams" class="admin-tab-content hidden bg-white p-6 rounded shadow-md">
                <div class="flex justify-between items-center mb-6 bg-gray-50 p-4 rounded border">
                    <div class="w-full md:w-1/2">
                        <label class="block text-sm font-bold mb-1 text-gray-600">Ø§Ø®ØªØ± Ø§Ù„Ù‚Ø³Ù… Ù„Ù„ØªØ¹Ø¯ÙŠÙ„:</label>
                        <select id="admin-league-selector" onchange="renderTeamsEditor()" class="w-full border-2 border-kl-green p-2 rounded font-bold text-gray-800">
                            <!-- JS Filled -->
                        </select>
                    </div>
                    <div class="space-x-2 space-x-reverse hidden">
                         <!-- Hidden for safety, can be re-enabled if needed to add dynamic leagues -->
                        <button onclick="createNewLeague()" class="bg-blue-600 text-white px-3 py-2 rounded text-sm hover:bg-blue-700"><i class="fas fa-plus"></i></button>
                    </div>
                </div>

                <div class="mb-4">
                    <label class="block text-sm font-bold mb-1">Ø§Ø³Ù… Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ø­Ø§Ù„ÙŠ:</label>
                    <input type="text" id="current-league-name" onchange="updateLeagueName(this.value)" class="w-full border p-2 rounded font-bold">
                </div>

                <div class="overflow-x-auto">
                    <table class="w-full text-center border text-xs">
                        <thead class="bg-gray-100">
                            <tr>
                                <th class="p-1">#</th>
                                <th class="p-1 w-16">Ø§Ù„Ø´Ø¹Ø§Ø±</th> <!-- New Logo Column -->
                                <th class="p-1 min-w-[150px]">Ø§Ù„ÙØ±ÙŠÙ‚</th>
                                <th class="p-1">Ù„</th>
                                <th class="p-1">Ù</th>
                                <th class="p-1">Øª</th>
                                <th class="p-1">Ø®</th>
                                <th class="p-1">+</th>
                                <th class="p-1">-</th>
                                <th class="p-1">+/-</th>
                                <th class="p-1">Ù†</th>
                                <th class="p-1">Ø­Ø°Ù</th>
                            </tr>
                        </thead>
                        <tbody id="teams-editor-body">
                            <!-- JS Generated -->
                        </tbody>
                    </table>
                    <button onclick="addNewTeamRow()" class="mt-4 bg-gray-200 px-4 py-2 rounded hover:bg-gray-300 font-bold w-full">+ Ø¥Ø¶Ø§ÙØ© ÙØ±ÙŠÙ‚ Ù„Ù„Ù‚Ø³Ù… Ø§Ù„Ø­Ø§Ù„ÙŠ</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="bg-kl-black text-white shadow-lg sticky top-0 z-40">
        <div class="container mx-auto px-4 py-3 flex justify-between items-center">
            <div class="flex items-center space-x-3 space-x-reverse cursor-pointer" onclick="showSection('home')">
                <div id="header-logo-container" class="w-12 h-12 flex items-center justify-center">
                    <!-- JS will populate this with Img or Icon -->
                </div>
                <div>
                    <h1 class="text-2xl font-black tracking-tighter uppercase leading-none" id="display-site-title">
                        KOORA <span class="text-kl-light-green">LAGHOUAT</span>
                    </h1>
                    <span class="text-xs text-gray-400 block" id="display-site-desc">Ù†Ø¨Ø¶ Ø§Ù„ÙƒØ±Ø© Ø§Ù„Ø£ØºÙˆØ§Ø·ÙŠØ©</span>
                </div>
            </div>
            <button id="mobile-menu-btn" class="lg:hidden text-2xl focus:outline-none hover:text-kl-light-green"><i class="fas fa-bars"></i></button>
            <nav class="hidden lg:flex space-x-6 space-x-reverse text-sm font-semibold">
                <a href="#" onclick="showSection('home')" class="nav-link hover:text-kl-light-green transition pb-1 active-link" id="nav-home">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
                <a href="#" onclick="showSection('news')" class="nav-link hover:text-kl-light-green transition pb-1" id="nav-news">Ø§Ù„Ø£Ø®Ø¨Ø§Ø±</a>
                <a href="#" onclick="showSection('standings')" class="nav-link hover:text-kl-light-green transition pb-1" id="nav-standings">ØªØ±ØªÙŠØ¨ Ø§Ù„ÙØ±Ù‚</a>
                <a href="#" onclick="showSection('contact')" class="nav-link hover:text-kl-light-green transition pb-1" id="nav-contact">Ø§ØªØµÙ„ Ø¨Ù†Ø§</a>
            </nav>
        </div>
        <div id="mobile-menu" class="hidden lg:hidden bg-gray-900 border-t border-gray-700 p-4 space-y-3">
            <a href="#" onclick="showSection('home')" class="block hover:text-kl-light-green">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
            <a href="#" onclick="showSection('news')" class="block hover:text-kl-light-green">Ø§Ù„Ø£Ø®Ø¨Ø§Ø±</a>
            <a href="#" onclick="showSection('standings')" class="block hover:text-kl-light-green">ØªØ±ØªÙŠØ¨ Ø§Ù„ÙØ±Ù‚</a>
        </div>
    </header>

    <!-- Ticker -->
    <div class="bg-kl-green text-white text-sm py-2 relative overflow-hidden flex items-center shadow-inner">
        <div class="bg-kl-green z-10 px-3 font-bold whitespace-nowrap shadow-md absolute right-0 h-full flex items-center border-l border-green-800">
            <span class="animate-pulse bg-red-600 px-2 rounded text-xs ml-2">Ø´Ø±ÙŠØ· Ø§Ù„Ø£Ø®Ø¨Ø§Ø±</span>
        </div>
        <div class="overflow-hidden w-full h-6 relative">
            <div class="absolute top-0 right-0 whitespace-nowrap animate-[ticker_30s_linear_infinite]" id="news-ticker-content" style="text-align: right;"></div>
        </div>
    </div>

    <!-- Main Content -->
    <main class="container mx-auto px-4 py-8 min-h-screen" id="main-content">

        <!-- HOME -->
        <section id="home" class="space-y-12 section-block animate-fade-in">
            <!-- Slider -->
            <div class="relative w-full h-96 md:h-[500px] rounded-2xl overflow-hidden shadow-2xl group">
                <div class="absolute inset-0 bg-black/40 z-10"></div>
                <img id="slider-img" src="" class="w-full h-full object-cover transition-opacity duration-700" alt="Slider">
                <div class="absolute bottom-10 right-10 z-20 text-white max-w-2xl">
                    <span class="bg-kl-green px-3 py-1 rounded text-sm font-bold mb-2 inline-block">Ù…Ù…ÙŠØ²</span>
                    <h2 id="slider-title" class="text-3xl md:text-5xl font-black leading-tight mb-4 drop-shadow-lg"></h2>
                </div>
                <div class="absolute bottom-10 left-10 z-20 flex space-x-2 space-x-reverse">
                    <button onclick="changeSlide(1)" class="w-10 h-10 bg-white/20 hover:bg-kl-green rounded-full text-white flex items-center justify-center backdrop-blur-sm transition"><i class="fas fa-chevron-right"></i></button>
                    <button onclick="changeSlide(-1)" class="w-10 h-10 bg-white/20 hover:bg-kl-green rounded-full text-white flex items-center justify-center backdrop-blur-sm transition"><i class="fas fa-chevron-left"></i></button>
                </div>
            </div>

            <!-- Featured News -->
            <div>
                 <div class="flex justify-between items-end mb-6 border-r-4 border-kl-green pr-4">
                    <h3 class="text-2xl font-bold">Ø¢Ø®Ø± Ø§Ù„Ù…Ø³ØªØ¬Ø¯Ø§Øª</h3>
                    <button onclick="showSection('news')" class="text-kl-green hover:underline text-sm font-bold">Ø¹Ø±Ø¶ Ø§Ù„ÙƒÙ„</button>
                </div>
                <div id="featured-news-grid" class="grid grid-cols-1 md:grid-cols-3 gap-6"></div>
            </div>
        </section>

        <!-- NEWS PAGE -->
        <section id="news" class="section-block section-hidden animate-fade-in">
            <h2 class="text-3xl font-black text-kl-green mb-8 text-center">Ø£Ø±Ø´ÙŠÙ Ø§Ù„Ø£Ø®Ø¨Ø§Ø±</h2>
            <div id="all-news-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"></div>
        </section>

        <!-- STANDINGS PAGE -->
        <section id="standings" class="section-block section-hidden animate-fade-in">
            <h2 class="text-3xl font-black text-center mb-6">Ø¬Ø¯Ø§ÙˆÙ„ Ø§Ù„ØªØ±ØªÙŠØ¨</h2>
            
            <!-- League Selector (Public) -->
            <div class="mb-8">
                <div id="public-league-selector" class="flex flex-wrap gap-3 justify-center">
                    <!-- JS Generated Buttons -->
                </div>
            </div>

            <div class="bg-white rounded-2xl shadow-xl overflow-hidden border border-gray-200">
                <div class="bg-kl-green p-4 text-white flex justify-between items-center">
                    <h3 id="public-league-title" class="text-xl font-bold"></h3>
                    <span class="text-sm bg-white/20 px-2 py-1 rounded">Ù…ÙˆØ³Ù… 2024/2025</span>
                </div>
                
                <div class="overflow-x-auto">
                    <table class="w-full text-center whitespace-nowrap">
                        <thead class="bg-gray-100 text-gray-700 text-sm border-b-2 border-kl-green">
                            <tr>
                                <th class="p-3">#</th>
                                <th class="p-3 text-right">Ø§Ù„ÙØ±ÙŠÙ‚</th>
                                <th class="p-3 bg-gray-200 font-black">Ù†Ù‚Ø§Ø·</th>
                                <th class="p-3">Ù„Ø¹Ø¨</th>
                                <th class="p-3">ÙØ§Ø²</th>
                                <th class="p-3">ØªØ¹Ø§Ø¯Ù„</th>
                                <th class="p-3">Ø®Ø³Ø±</th>
                                <th class="p-3 text-green-600 font-bold">Ù„Ù‡</th>
                                <th class="p-3 text-red-600 font-bold">Ø¹Ù„ÙŠÙ‡</th>
                                <th class="p-3">+/-</th>
                            </tr>
                        </thead>
                        <tbody id="standings-body" class="text-gray-700 font-semibold text-sm">
                            <!-- JS Rendered -->
                        </tbody>
                    </table>
                </div>
            </div>
            
            <div class="mt-4 flex gap-4 text-xs font-bold text-gray-500 justify-center">
                <div class="flex items-center"><span class="w-3 h-3 bg-green-100 border border-green-500 ml-2"></span> ØµØ¹ÙˆØ¯ / Ù…ØªØµØ¯Ø±</div>
                <div class="flex items-center"><span class="w-3 h-3 bg-red-100 border border-red-500 ml-2"></span> Ø³Ù‚ÙˆØ· / Ù…Ø¤Ø®Ø±Ø©</div>
            </div>
        </section>

        <!-- CONTACT PAGE -->
        <section id="contact" class="section-block section-hidden animate-fade-in">
             <div class="max-w-2xl mx-auto bg-white rounded-2xl shadow-xl overflow-hidden">
                <div class="bg-kl-black p-6 text-white text-center">
                    <h2 class="text-3xl font-bold mb-2">Ø§ØªØµÙ„ Ø¨Ù†Ø§</h2>
                </div>
                <div class="p-8">
                     <form onsubmit="event.preventDefault(); alert('ØªÙ… Ø§Ù„Ø¥Ø±Ø³Ø§Ù„');" class="space-y-4">
                        <input type="text" class="w-full border rounded p-2" placeholder="Ø§Ù„Ø§Ø³Ù…" required>
                        <textarea class="w-full border rounded p-2 h-32" placeholder="Ø§Ù„Ø±Ø³Ø§Ù„Ø©" required></textarea>
                        <button class="w-full bg-kl-green text-white py-3 rounded font-bold">Ø¥Ø±Ø³Ø§Ù„</button>
                    </form>
                </div>
            </div>
        </section>

    </main>

    <!-- Footer -->
    <footer class="bg-kl-black text-white pt-10 pb-6 border-t-4 border-kl-green text-center">
        <p>&copy; 2025 Ø§Ù„ÙƒØ±Ø© ÙÙŠ Ø§Ù„Ø£ØºÙˆØ§Ø· | KOORA LAGHOUAT</p>
    </footer>

    <!-- Logic -->
    <script>
        // --- 1. DEFAULT DATA ---
        // Helper function to create empty teams
        function createTeams(count) {
            return Array.from({length: count}, (_, i) => ({
                name: `ÙØ±ÙŠÙ‚ ${i + 1}`,
                logo: "", // New Field
                played: 0, won: 0, draw: 0, lost: 0, gf: 0, ga: 0, diff: 0, points: 0
            }));
        }

        const defaultData = {
            config: {
                siteName1: "KOORA",
                siteName2: "LAGHOUAT",
                desc: "Ù†Ø¨Ø¶ Ø§Ù„ÙƒØ±Ø© Ø§Ù„Ø£ØºÙˆØ§Ø·ÙŠØ©",
                logo: "", // New Field for Site Logo
                bgImage: "" 
            },
            ticker: [
                "ğŸ”´ Ø§ØªØ­Ø§Ø¯ Ø§Ù„Ø£ØºÙˆØ§Ø· ÙŠØ­Ù‚Ù‚ ÙÙˆØ²Ø§Ù‹ Ø«Ù…ÙŠÙ†Ø§Ù‹ Ø®Ø§Ø±Ø¬ Ø§Ù„Ø¯ÙŠØ§Ø±",
                "âš½ Ø§Ù†Ø·Ù„Ø§Ù‚ Ø§Ù„ØªØ³Ø¬ÙŠÙ„Ø§Øª Ù„Ù„ÙØ¦Ø§Øª Ø§Ù„Ø´Ø¨Ø§Ù†ÙŠØ© ÙÙŠ Ù…Ø¯Ø±Ø³Ø© Ø§Ù„ÙƒØ±Ø©",
                "ğŸ“¢ ØªØ£Ø¬ÙŠÙ„ Ù…Ø¨Ø§Ø±Ø§Ø© Ø§Ù„Ø¯ÙŠØ±Ø¨ÙŠ Ø¨Ø³Ø¨Ø¨ Ø³ÙˆØ¡ Ø§Ù„Ø£Ø­ÙˆØ§Ù„ Ø§Ù„Ø¬ÙˆÙŠØ©",
                "ğŸ† ØªØªÙˆÙŠØ¬ Ø£ØµØ§ØºØ± Ø§Ù„Ø´Ø¨Ø§Ø¨ Ø¨Ø§Ù„Ø¨Ø·ÙˆÙ„Ø© Ø§Ù„ÙˆÙ„Ø§Ø¦ÙŠØ©"
            ],
            slider: [
                { img: "https://images.unsplash.com/photo-1517466787929-bc90951d0974?q=80&w=1200", title: "ØªØ£Ù‡Ù„ Ø§Ù„Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ© Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ© Ù„Ù„Ø£ØºÙˆØ§Ø· Ù„Ù„Ø¯ÙˆØ± 16" },
                { img: "https://images.unsplash.com/photo-1517927033932-b3d18e61fb3a?q=80&w=1200", title: "Ø¹Ù…Ù„ÙŠØ© Ø¬Ø±Ø§Ø­ÙŠØ© Ù†Ø§Ø¬Ø­Ø© Ù„Ù„Ø§Ø¹Ø¨ ØµÙ‡ÙŠØ¨ Ù†Ø¬Ø§Ù…" },
                { img: "https://images.unsplash.com/photo-1504711434969-e33886168f5c?q=80&w=1200", title: "ØªØ¹Ø²ÙŠØ©: Ø§Ù„ØµØ­ÙÙŠ Ø¹Ø¨Ø¯ Ø§Ù„Ø­ÙÙŠØ¸ Ø´Ø§ÙŠØ¨ ÙÙŠ Ø°Ù…Ø© Ø§Ù„Ù„Ù‡" },
                { img: "https://images.unsplash.com/photo-1595152772835-219674b2a8a6?q=80&w=1200", title: "ØªØ¹Ø²ÙŠØ©: ÙˆÙØ§Ø© Ø§Ù„Ù…Ù†Ø§ØµØ± Ø¹Ø¨Ø¯ Ø§Ù„Ù…Ø¤Ù…Ù† Ù…Ø­Ù…Ø¯" }
            ],
            news: [
                { title: "ØªØµØ±ÙŠØ­Ø§Øª Ù†Ø§Ø±ÙŠØ© Ù„Ù„Ù…Ø¯Ø±Ø¨", cat: "Ø£ÙƒØ§Ø¨Ø±", date: "14 Ø¯ÙŠØ³Ù…Ø¨Ø±", img: "https://images.unsplash.com/photo-1517466787929-bc90951d0974?q=80&w=600" },
                { title: "Ø§Ù„Ù…ÙˆØ§Ù‡Ø¨ Ø§Ù„Ø´Ø§Ø¨Ø© ØªØªØ£Ù„Ù‚", cat: "Ø´Ø¨Ø§Ù†", date: "13 Ø¯ÙŠØ³Ù…Ø¨Ø±", img: "https://images.unsplash.com/photo-1522778119026-d647f0565c6d?q=80&w=600" }
            ],
            // Updated Leagues Structure with requested divisions
            leagues: [
                {
                    id: 1,
                    title: "Ø§Ù„Ù‚Ø³Ù… Ø§Ù„ÙˆØ·Ù†ÙŠ Ø§Ù„Ø«Ø§Ù„Ø« - Ø§Ù„Ø¬Ù†ÙˆØ¨ Ø§Ù„Ø´Ø±Ù‚ÙŠ",
                    teams: [
                        { name: "Ø¥ØªØ­Ø§Ø¯ Ø§Ù„Ù†Ø²Ù„Ø©", logo: "", played: 12, won: 10, draw: 2, lost: 0, gf: 24, ga: 7, diff: 17, points: 32 },
                        { name: "Ù†Ø§Ø¯ÙŠ ØªÙ‚Ø±Øª", logo: "", played: 12, won: 10, draw: 2, lost: 0, gf: 18, ga: 5, diff: 13, points: 32 },
                        { name: "Ø£ Ù…ØªÙŠÙ„ÙŠ Ø§Ù„Ø´Ø¹Ø§Ù†Ø¨Ø©", logo: "", played: 12, won: 8, draw: 1, lost: 3, gf: 17, ga: 5, diff: 12, points: 25 },
                        { name: "Ø§ØªØ­Ø§Ø¯ Ø§Ù„Ø®Ù†Ù‚", logo: "", played: 12, won: 8, draw: 1, lost: 3, gf: 17, ga: 6, diff: 11, points: 25 },
                        { name: "Ø¥ØªØ­Ø§Ø¯ Ø§Ù„Ø²Ø§ÙˆÙŠØ©", logo: "", played: 12, won: 6, draw: 3, lost: 3, gf: 19, ga: 14, diff: 5, points: 20 },
                        { name: "Ø§ØªØ­Ø§Ø¯ Ø§ÙÙ„Ùˆ", logo: "", played: 12, won: 5, draw: 4, lost: 3, gf: 18, ga: 12, diff: 6, points: 19 },
                        { name: "Ø¥ØªØ­Ø§Ø¯ Ù‡Ù…Ø§ÙŠØ³Ø©", logo: "", played: 12, won: 6, draw: 1, lost: 5, gf: 15, ga: 10, diff: 5, points: 19 },
                        { name: "Ù…Ø´Ø¹Ù„ Ø­Ø§Ø³ÙŠ Ù…Ø³Ø¹ÙˆØ¯", logo: "", played: 12, won: 5, draw: 4, lost: 3, gf: 12, ga: 12, diff: 0, points: 19 },
                        { name: "Ø´Ø¨Ø§Ø¨ Ø¬Ø§Ù…Ø¹Ø©", logo: "", played: 12, won: 4, draw: 2, lost: 6, gf: 12, ga: 13, diff: -1, points: 14 },
                        { name: "Ø±Ø§Ø¦Ø¯ Ù‚Ù„ØªØ©Ø³ Ø³Ø¹Ø¯", logo: "", played: 12, won: 4, draw: 1, lost: 7, gf: 18, ga: 15, diff: 3, points: 13 },
                        { name: "Ø§ÙˆÙ„Ù…Ø¨ÙŠ Ø§Ù„ÙˆØ§Ø¯", logo: "", played: 12, won: 3, draw: 5, lost: 4, gf: 12, ga: 14, diff: -2, points: 13 },
                        { name: "Ø£ÙˆÙ„Ù…Ø¨ÙŠÙƒ Ø§Ù„Ù…Ù‚Ø±Ù†", logo: "", played: 12, won: 3, draw: 4, lost: 5, gf: 10, ga: 12, diff: -2, points: 13 },
                        { name: "Ù†Ø¬ÙˆÙ… Ø§Ù„ÙŠØ²ÙŠ", logo: "", played: 12, won: 3, draw: 2, lost: 7, gf: 9, ga: 15, diff: -6, points: 11 },
                        { name: "Ø¥ØªØ­Ø§Ø¯ Ø­Ø§Ø³ÙŠ Ø§Ù„Ø±Ù…Ù„", logo: "", played: 12, won: 2, draw: 2, lost: 8, gf: 5, ga: 15, diff: -10, points: 8 },
                        { name: "Ø§ØªØ­Ø§Ø¯ Ø³ÙˆÙ", logo: "", played: 12, won: 1, draw: 1, lost: 10, gf: 7, ga: 30, diff: -23, points: 0 },
                        { name: "Ø§ØªØ­Ø§Ø¯ ÙˆØ±Ù‚Ù„Ø©", logo: "", played: 12, won: 0, draw: 1, lost: 11, gf: 6, ga: 34, diff: -28, points: -5 }
                    ]
                },
                {
                    id: 2,
                    title: "Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ø¬Ù‡ÙˆÙŠ Ø§Ù„Ø§ÙˆÙ„ - Ø£ - ÙˆØ±Ù‚Ù„Ø©",
                    teams: createTeams(16)
                },
                {
                    id: 3,
                    title: "Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ø¬Ù‡ÙˆÙŠ Ø§Ù„Ø«Ø§Ù†ÙŠ - Ø¨ - ÙˆØ±Ù‚Ù„Ø©",
                    teams: createTeams(16)
                },
                {
                    id: 4,
                    title: "Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ø¬Ù‡ÙˆÙŠ Ø§Ù„Ø«Ø§Ù†ÙŠ - Ø¬ - ÙˆØ±Ù‚Ù„Ø©",
                    teams: createTeams(16)
                },
                {
                    id: 5,
                    title: "Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ø´Ø±ÙÙŠ - Ø£ - Ø§Ù„Ø£ØºÙˆØ§Ø·",
                    teams: createTeams(9)
                },
                {
                    id: 6,
                    title: "Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ø´Ø±ÙÙŠ - Ø¨ - Ø§Ù„Ø£ØºÙˆØ§Ø·",
                    teams: createTeams(10)
                },
                {
                    id: 7,
                    title: "Ø§Ù„Ù‚Ø³Ù… Ø§Ù„ÙˆÙ„Ø§Ø¦ÙŠ Ø£",
                    teams: createTeams(6)
                },
                {
                    id: 8,
                    title: "Ø§Ù„Ù‚Ø³Ù… Ø§Ù„ÙˆÙ„Ø§Ø¦ÙŠ Ø¨",
                    teams: createTeams(6)
                }
            ]
        };

        // --- 2. STATE MANAGEMENT ---
        let appData = JSON.parse(localStorage.getItem('koora_laghouat_data')) || defaultData;
        
        // ** MIGRATION LOGIC **
        // If the user has old data structure (fewer leagues), we merge/update
        if (!appData.leagues || appData.leagues.length < 8) {
             // Reset to default to ensure all new leagues appear properly
             // We keep slider/news if possible, but structure update is priority
             const oldNews = appData.news || defaultData.news;
             const oldSlider = appData.slider || defaultData.slider;
             const oldTicker = appData.ticker || defaultData.ticker;
             const oldConfig = appData.config || defaultData.config;
             
             // Keep the first league (National 3) data if it exists
             let firstLeague = defaultData.leagues[0];
             if(appData.leagues && appData.leagues.length > 0) {
                 firstLeague = appData.leagues[0];
             }

             appData = JSON.parse(JSON.stringify(defaultData)); // Deep copy default
             appData.news = oldNews;
             appData.slider = oldSlider;
             appData.ticker = oldTicker;
             appData.config = oldConfig;
             appData.leagues[0] = firstLeague; // Restore first league data

             localStorage.setItem('koora_laghouat_data', JSON.stringify(appData));
        }

        let isAdmin = false;
        let activeLeagueIndex = 0; // For public view

        function saveData() {
            localStorage.setItem('koora_laghouat_data', JSON.stringify(appData));
            renderAll();
        }

        // --- 3. RENDERING FUNCTIONS ---
        function renderAll() {
            renderConfig();
            renderTicker();
            renderSlider();
            renderNews();
            renderStandings();
            
            // Only re-render admin if panel is open
            if(!document.getElementById('admin-panel').classList.contains('section-hidden')) {
                 initAdminForms(); // Refresh dropdowns
            }
        }

        function renderConfig() {
            document.getElementById('display-site-title').innerHTML = `${appData.config.siteName1} <span class="text-kl-light-green">${appData.config.siteName2}</span>`;
            document.getElementById('display-site-desc').innerText = appData.config.desc;
            
            // Handle Site Logo
            const logoContainer = document.getElementById('header-logo-container');
            if (appData.config.logo && appData.config.logo.trim() !== "") {
                logoContainer.innerHTML = `<img src="${appData.config.logo}" alt="Logo" class="w-full h-full object-contain">`;
            } else {
                logoContainer.innerHTML = `
                    <div class="w-10 h-10 bg-white rounded-full flex items-center justify-center text-kl-green font-bold text-xl border-2 border-kl-green">
                        <i class="fas fa-futbol"></i>
                    </div>`;
            }

            if(appData.config.bgImage) {
                document.body.style.backgroundImage = `url('${appData.config.bgImage}')`;
                document.body.style.backgroundSize = "cover";
                document.body.style.backgroundAttachment = "fixed";
            }
        }

        function renderTicker() {
            const tickerContainer = document.getElementById('news-ticker-content');
            tickerContainer.innerHTML = appData.ticker.map(item => `<span class="mx-8 inline-block">${item}</span>`).join('');
        }

        let currentSlide = 0;
        let sliderInterval;

        function renderSlider() {
            if(appData.slider.length === 0) return;
            updateSlideView();
            if(sliderInterval) clearInterval(sliderInterval);
            sliderInterval = setInterval(() => changeSlide(1), 5000);
        }

        function updateSlideView() {
            const img = document.getElementById('slider-img');
            const title = document.getElementById('slider-title');
            if (currentSlide >= appData.slider.length) currentSlide = 0;
            if (currentSlide < 0) currentSlide = appData.slider.length - 1;
            img.style.opacity = 0;
            setTimeout(() => {
                img.src = appData.slider[currentSlide].img;
                title.innerText = appData.slider[currentSlide].title;
                img.style.opacity = 1;
            }, 300);
        }

        function changeSlide(direction) {
            currentSlide += direction;
            updateSlideView();
        }

        function renderNews() {
            const featuredContainer = document.getElementById('featured-news-grid');
            featuredContainer.innerHTML = appData.news.slice(0, 3).map(news => createNewsCard(news)).join('');
            const allNewsContainer = document.getElementById('all-news-grid');
            allNewsContainer.innerHTML = appData.news.map(news => createNewsCard(news)).join('');
        }

        function createNewsCard(news) {
            return `
                <div class="bg-white rounded-xl shadow-md overflow-hidden hover:shadow-xl transition duration-300 border border-gray-100 group">
                    <div class="h-48 overflow-hidden hover-zoom relative">
                        <img src="${news.img}" class="w-full h-full object-cover" alt="${news.title}" onerror="this.src='https://placehold.co/600x400?text=No+Image'">
                        <span class="absolute top-2 right-2 bg-kl-green text-white text-xs px-2 py-1 rounded shadow">${news.cat}</span>
                    </div>
                    <div class="p-4">
                        <div class="text-xs text-gray-400 mb-2"><i class="far fa-calendar-alt ml-1"></i> ${news.date}</div>
                        <h4 class="font-bold text-lg mb-2 group-hover:text-kl-green transition">${news.title}</h4>
                    </div>
                </div>
            `;
        }

        function renderStandings() {
            // Render Tab Buttons
            const btnContainer = document.getElementById('public-league-selector');
            btnContainer.innerHTML = appData.leagues.map((league, idx) => `
                <button onclick="switchLeagueView(${idx})" 
                    class="px-4 py-2 rounded-lg border transition font-bold text-sm text-center flex-grow md:flex-grow-0 ${idx === activeLeagueIndex ? 'league-btn-active transform scale-105' : 'league-btn-inactive hover:bg-gray-50'}">
                    ${league.title}
                </button>
            `).join('');

            // Render Active Table
            if (appData.leagues.length > 0) {
                const currentLeague = appData.leagues[activeLeagueIndex];
                document.getElementById('public-league-title').innerText = currentLeague.title;
                const tbody = document.getElementById('standings-body');
                
                // Sort teams by points (Descending)
                const sortedTeams = [...currentLeague.teams].sort((a, b) => b.points - a.points);

                tbody.innerHTML = sortedTeams.map((team, index) => {
                    // Logic for row highlighting (Example: 1st place green, last 2 red)
                    let rowClass = "border-b hover:bg-gray-50 transition";
                    let rankBg = "bg-gray-100";
                    
                    if (index === 0) {
                        rowClass = "border-b bg-green-50 hover:bg-green-100";
                        rankBg = "bg-green-200 text-kl-green";
                    } else if (index >= sortedTeams.length - 2) {
                        rowClass = "border-b bg-red-50 hover:bg-red-100";
                        rankBg = "bg-red-200 text-red-700";
                    }

                    // Logo HTML
                    const logoHtml = team.logo && team.logo.trim() !== "" 
                        ? `<img src="${team.logo}" class="w-8 h-8 object-contain mx-auto">`
                        : `<div class="w-8 h-8 bg-gray-200 rounded-full mx-auto flex items-center justify-center text-gray-400 text-xs"><i class="fas fa-shield-alt"></i></div>`;

                    return `
                    <tr class="${rowClass}">
                        <td class="p-3">
                            <span class="${rankBg} w-6 h-6 flex items-center justify-center rounded-full font-bold text-xs mx-auto">${index + 1}</span>
                        </td>
                        <td class="p-3 text-right flex items-center gap-2">
                             ${logoHtml}
                             <span class="font-bold text-gray-800">${team.name}</span>
                        </td>
                        <td class="p-3 bg-white/50 text-kl-black font-black text-lg border-l border-r border-gray-100">${team.points}</td>
                        <td class="p-3">${team.played}</td>
                        <td class="p-3">${team.won}</td>
                        <td class="p-3">${team.draw}</td>
                        <td class="p-3">${team.lost}</td>
                        <td class="p-3 text-green-600 font-bold">${team.gf}</td>
                        <td class="p-3 text-red-600 font-bold">${team.ga}</td>
                        <td class="p-3 font-bold dir-ltr">${team.diff > 0 ? '+' + team.diff : team.diff}</td>
                    </tr>
                `}).join('');
            } else {
                document.getElementById('standings-body').innerHTML = '<tr><td colspan="10" class="p-4 text-center">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¬Ø¯Ø§ÙˆÙ„ ØªØ±ØªÙŠØ¨ Ø­Ø§Ù„ÙŠØ§Ù‹</td></tr>';
            }
        }

        function switchLeagueView(idx) {
            activeLeagueIndex = idx;
            renderStandings();
        }

        // --- 4. ADMIN LOGIC ---
        function toggleLoginModal() {
            const modal = document.getElementById('login-modal');
            if(isAdmin) {
                document.getElementById('admin-panel').classList.remove('section-hidden');
                initAdminForms();
            } else {
                if(modal.classList.contains('modal-hidden')) {
                    modal.classList.remove('modal-hidden');
                    modal.classList.add('modal-visible');
                } else {
                    modal.classList.add('modal-hidden');
                    modal.classList.remove('modal-visible');
                }
            }
        }

        function handleLogin(e) {
            e.preventDefault();
            const u = document.getElementById('username').value;
            const p = document.getElementById('password').value;
            if(u === 'kooralaghouat' && p === 'kooradz2015') {
                isAdmin = true;
                const modal = document.getElementById('login-modal');
                modal.classList.add('modal-hidden');
                modal.classList.remove('modal-visible');
                document.getElementById('admin-panel').classList.remove('section-hidden');
                initAdminForms();
                document.getElementById('username').value = '';
                document.getElementById('password').value = '';
            } else {
                alert('Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª!');
            }
        }

        function closeAdminPanel() {
            document.getElementById('admin-panel').classList.add('section-hidden');
            isAdmin = false;
        }

        function switchAdminTab(tabName) {
            document.querySelectorAll('.admin-tab-content').forEach(el => el.classList.add('hidden'));
            document.getElementById(`tab-${tabName}`).classList.remove('hidden');
            document.querySelectorAll('.admin-tab-btn').forEach(btn => {
                btn.classList.remove('bg-kl-green', 'text-white');
                btn.classList.add('bg-white', 'text-black');
            });
            event.target.classList.remove('bg-white', 'text-black');
            event.target.classList.add('bg-kl-green', 'text-white');
        }

        function initAdminForms() {
            document.getElementById('edit-site-name-1').value = appData.config.siteName1;
            document.getElementById('edit-site-name-2').value = appData.config.siteName2;
            document.getElementById('edit-site-desc').value = appData.config.desc;
            document.getElementById('edit-site-logo').value = appData.config.logo || ""; // Logo
            document.getElementById('edit-bg-image').value = appData.config.bgImage;
            document.getElementById('edit-ticker-text').value = appData.ticker.join('\n');
            renderSliderEditor();
            renderNewsEditor();
            
            // Init League Selector
            const selector = document.getElementById('admin-league-selector');
            if (appData.leagues.length > 0) {
                selector.innerHTML = appData.leagues.map((l, idx) => `<option value="${idx}">${l.title}</option>`).join('');
                renderTeamsEditor(); // Render for first selected
            } else {
                selector.innerHTML = '<option value="">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø£Ù‚Ø³Ø§Ù…</option>';
                document.getElementById('teams-editor-body').innerHTML = '';
            }
        }

        function renderSliderEditor() {
            const container = document.getElementById('slider-editor-container');
            container.innerHTML = appData.slider.map((slide, index) => `
                <div class="border p-4 rounded bg-gray-50 relative">
                    <button onclick="deleteSlide(${index})" class="absolute top-2 left-2 text-red-500 hover:text-red-700 font-bold">X</button>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-2">
                        <input type="text" value="${slide.title}" onchange="updateSlideData(${index}, 'title', this.value)" class="border p-2 rounded" placeholder="Ø§Ù„Ø¹Ù†ÙˆØ§Ù†">
                        <input type="text" value="${slide.img}" onchange="updateSlideData(${index}, 'img', this.value)" class="border p-2 rounded" placeholder="Ø±Ø§Ø¨Ø· Ø§Ù„ØµÙˆØ±Ø©">
                    </div>
                </div>
            `).join('');
        }

        function renderNewsEditor() {
            const container = document.getElementById('news-editor-container');
            container.innerHTML = appData.news.map((n, index) => `
                <div class="border p-4 rounded bg-gray-50 relative">
                    <button onclick="deleteNews(${index})" class="absolute top-2 left-2 text-red-500 hover:text-red-700 font-bold">X</button>
                    <input type="text" value="${n.title}" onchange="updateNewsData(${index}, 'title', this.value)" class="border p-2 rounded w-full mb-2" placeholder="Ø§Ù„Ø¹Ù†ÙˆØ§Ù†">
                    <div class="grid grid-cols-3 gap-2">
                        <input type="text" value="${n.cat}" onchange="updateNewsData(${index}, 'cat', this.value)" class="border p-2 rounded" placeholder="Ø§Ù„ØªØµÙ†ÙŠÙ">
                        <input type="text" value="${n.date}" onchange="updateNewsData(${index}, 'date', this.value)" class="border p-2 rounded" placeholder="Ø§Ù„ØªØ§Ø±ÙŠØ®">
                        <input type="text" value="${n.img}" onchange="updateNewsData(${index}, 'img', this.value)" class="border p-2 rounded" placeholder="Ø§Ù„ØµÙˆØ±Ø©">
                    </div>
                </div>
            `).join('');
        }

        // --- MULTI-LEAGUE TEAMS EDITOR ---
        function renderTeamsEditor() {
            const leagueIdx = document.getElementById('admin-league-selector').value;
            if (leagueIdx === "" || !appData.leagues[leagueIdx]) return;

            const league = appData.leagues[leagueIdx];
            document.getElementById('current-league-name').value = league.title;

            const tbody = document.getElementById('teams-editor-body');
            tbody.innerHTML = league.teams.map((t, index) => `
                <tr class="hover:bg-gray-50 border-b">
                    <td class="p-1 text-gray-500">${index + 1}</td>
                    <!-- Logo Input -->
                    <td class="p-1">
                        <input type="text" value="${t.logo || ''}" onchange="updateTeamData(${leagueIdx}, ${index}, 'logo', this.value)" 
                        class="border p-1 w-full text-center text-xs rounded bg-gray-50" placeholder="Ø±Ø§Ø¨Ø· Ø§Ù„Ø´Ø¹Ø§Ø±">
                    </td>
                    <td class="p-1"><input type="text" value="${t.name}" onchange="updateTeamData(${leagueIdx}, ${index}, 'name', this.value)" class="border p-1 w-full text-center text-xs font-bold rounded"></td>
                    <td class="p-1"><input type="number" value="${t.played}" onchange="updateTeamData(${leagueIdx}, ${index}, 'played', this.value)" class="border p-1 w-10 text-center text-xs rounded"></td>
                    <td class="p-1"><input type="number" value="${t.won}" onchange="updateTeamData(${leagueIdx}, ${index}, 'won', this.value)" class="border p-1 w-10 text-center text-xs bg-green-50 rounded"></td>
                    <td class="p-1"><input type="number" value="${t.draw}" onchange="updateTeamData(${leagueIdx}, ${index}, 'draw', this.value)" class="border p-1 w-10 text-center text-xs bg-yellow-50 rounded"></td>
                    <td class="p-1"><input type="number" value="${t.lost}" onchange="updateTeamData(${leagueIdx}, ${index}, 'lost', this.value)" class="border p-1 w-10 text-center text-xs bg-red-50 rounded"></td>
                    <td class="p-1"><input type="number" value="${t.gf}" onchange="updateTeamData(${leagueIdx}, ${index}, 'gf', this.value)" class="border p-1 w-10 text-center text-xs rounded"></td>
                    <td class="p-1"><input type="number" value="${t.ga}" onchange="updateTeamData(${leagueIdx}, ${index}, 'ga', this.value)" class="border p-1 w-10 text-center text-xs rounded"></td>
                    <td class="p-1"><input type="number" value="${t.diff}" onchange="updateTeamData(${leagueIdx}, ${index}, 'diff', this.value)" class="border p-1 w-10 text-center text-xs rounded"></td>
                    <td class="p-1"><input type="number" value="${t.points}" onchange="updateTeamData(${leagueIdx}, ${index}, 'points', this.value)" class="border-2 border-green-200 p-1 w-12 text-center font-black text-xs bg-green-100 rounded"></td>
                    <td class="p-1"><button onclick="deleteTeam(${leagueIdx}, ${index})" class="text-red-500 hover:text-red-700 bg-red-100 p-1 rounded"><i class="fas fa-trash"></i></button></td>
                </tr>
            `).join('');
        }

        // --- Helpers ---
        function updateSlideData(idx, key, val) { appData.slider[idx][key] = val; }
        function addNewSlideInput() { appData.slider.push({title: "Ø¬Ø¯ÙŠØ¯", img: ""}); renderSliderEditor(); }
        function deleteSlide(idx) { appData.slider.splice(idx, 1); renderSliderEditor(); }

        function updateNewsData(idx, key, val) { appData.news[idx][key] = val; }
        function addNewNewsInput() { appData.news.unshift({title: "Ø®Ø¨Ø±", cat: "Ø¹Ø§Ù…", date: "Ø§Ù„Ø¢Ù†", img: ""}); renderNewsEditor(); }
        function deleteNews(idx) { appData.news.splice(idx, 1); renderNewsEditor(); }

        // --- League Helpers ---
        function updateLeagueName(val) {
            const leagueIdx = document.getElementById('admin-league-selector').value;
            if (appData.leagues[leagueIdx]) {
                appData.leagues[leagueIdx].title = val;
                // Update dropdown text without re-rendering everything
                document.getElementById('admin-league-selector').options[leagueIdx].text = val;
            }
        }

        function createNewLeague() {
            const name = prompt("Ø£Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ø¬Ø¯ÙŠØ¯ (Ù…Ø«Ø§Ù„: Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ø´Ø±ÙÙŠ - ÙÙˆØ¬ Ø£):");
            if(name) {
                appData.leagues.push({
                    id: Date.now(),
                    title: name,
                    teams: []
                });
                initAdminForms(); // Refresh selector
                // Select the new league
                document.getElementById('admin-league-selector').value = appData.leagues.length - 1;
                renderTeamsEditor();
            }
        }

        function updateTeamData(leagueIdx, teamIdx, key, val) {
            appData.leagues[leagueIdx].teams[teamIdx][key] = val;
        }

        function addNewTeamRow() { 
            const leagueIdx = document.getElementById('admin-league-selector').value;
            appData.leagues[leagueIdx].teams.push({name: "ÙØ±ÙŠÙ‚ Ø¬Ø¯ÙŠØ¯", logo: "", played: 0, won: 0, draw: 0, lost: 0, gf: 0, ga: 0, diff: 0, points: 0}); 
            renderTeamsEditor(); 
        }

        function deleteTeam(leagueIdx, teamIdx) { 
            appData.leagues[leagueIdx].teams.splice(teamIdx, 1); 
            renderTeamsEditor(); 
        }

        function saveChanges() {
            appData.config.siteName1 = document.getElementById('edit-site-name-1').value;
            appData.config.siteName2 = document.getElementById('edit-site-name-2').value;
            appData.config.desc = document.getElementById('edit-site-desc').value;
            appData.config.logo = document.getElementById('edit-site-logo').value; // Save Logo
            appData.config.bgImage = document.getElementById('edit-bg-image').value;
            appData.ticker = document.getElementById('edit-ticker-text').value.split('\n').filter(line => line.trim() !== "");
            saveData();
            alert('ØªÙ… Ø­ÙØ¸ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª Ø¨Ù†Ø¬Ø§Ø­!');
            closeAdminPanel();
        }

        function showSection(sectionId) {
            document.querySelectorAll('.section-block').forEach(sec => sec.classList.add('section-hidden'));
            const target = document.getElementById(sectionId);
            if(target) {
                target.classList.remove('section-hidden');
                target.classList.remove('animate-fade-in');
                void target.offsetWidth; 
                target.classList.add('animate-fade-in');
            }
            document.querySelectorAll('.nav-link').forEach(link => link.classList.remove('active-link'));
            const activeLink = document.getElementById('nav-' + sectionId);
            if(activeLink) activeLink.classList.add('active-link');
            document.getElementById('mobile-menu').classList.add('hidden');
            window.scrollTo({top: 0, behavior: 'smooth'});
        }

        document.getElementById('mobile-menu-btn').addEventListener('click', () => {
            document.getElementById('mobile-menu').classList.toggle('hidden');
        });

        window.onload = function() {
            renderAll();
        };

    </script>
</body>
</html>
